import{_ as R,d as w,v as _,e as l,x as m,s as t,w as r,y as N,z as S,A,c as y,B as Q,C as T,E as b,F as L,G as $,H as U,I as g,J as v,o as V,K as H,L as W,N as O,O as P,R as z,S as G,T as J,U as K,V as k,W as f,q as X,u as I,X as x,Y as D,Z as M,$ as Y,a0 as F,r as Z,t as ee,a1 as j}from"./vendor.js";import q from"vue-cookies";import"moment";import"moment-timezone";const te=Object.assign({name:"EssentialLink"},{__name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},route:{type:String,default:null},function:{type:Function,default:()=>{}},external:{type:String,default:null},icon:{type:String,default:""},activeRoute:{type:String,required:!0},indent:{type:Boolean,default:!1}},setup(c,{expose:i}){i();const a=w(),e=c,o=_(()=>e.route&&e.route===e.activeRoute),u={router:a,props:e,isActive:o,click:()=>{e.route?a.push({path:e.route}):e.function()},computed:_,get useRouter(){return w}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function re(c,i,a,e,o,p){return l(),m(g,null,[t(U,{clickable:"",tag:e.props.external?"a":"router-link",href:e.props.external,onClick:e.click,target:"_blank","active-class":"q-item--highlighted",class:$({"q-pl-lg":e.props.indent}),style:A(e.isActive?"background-color: rgba(0, 31, 63, 0.1)":"")},{default:r(()=>[t(N,null,{default:r(()=>[t(S,{style:A(e.isActive?"font-weight: bold;":"")},{default:r(()=>[e.props.icon?(l(),y(Q,{key:0,name:e.props.icon,size:"sm",style:{opacity:"50%"}},null,8,["name"])):T("",!0),b(" "+L(e.props.title),1)]),_:1},8,["style"]),e.props.caption?(l(),y(S,{key:0,caption:""},{default:r(()=>[b(L(e.props.caption),1)]),_:1})):T("",!0)]),_:1})]),_:1},8,["tag","href","class","style"]),T("",!0)],64)}const ae=R(te,[["render",re],["__file","EssentialLink.vue"]]),oe={__name:"MainLayoutHelper",setup(c,{expose:i}){i();const a=v(!1),e=()=>{a.value=window.innerWidth<=1151},o=v(!1),p=v("Lorum Ipsum");function u(){o.value=!o.value}V(()=>{e(),window.addEventListener("resize",e)}),H(()=>{window.removeEventListener("resize",e)});const s={isSmallScreen:a,checkScreenWidth:e,leftDrawerOpen:o,siteTitle:p,toggleLeftDrawer:u,ref:v,onMounted:V,onUnmounted:H};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},ne={class:"q-px-md"},se={class:"q-pb-md"},le={class:"container-md row no-wrap items-center bg-primary text-white"},ue={class:"container-md"},ie={class:"q-px-md"},ce={class:"q-pb-md"};function de(c,i,a,e,o,p){return l(),m("div",null,[e.isSmallScreen?(l(),y(X,{key:0,view:"lHh Lpr lFf",style:{"background-color":"#F8F8F8","padding-bottom":"50px"}},{default:r(()=>[t(W,{elevated:"",style:{},class:"bg-primary"},{default:r(()=>[t(O,null,{default:r(()=>[t(P,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(z,null,{default:r(()=>[b(L(e.siteTitle),1)]),_:1}),t(G,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer})]),_:1})]),_:1}),t(J,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":i[0]||(i[0]=u=>e.leftDrawerOpen=u),"show-if-above":"",bordered:"",side:"right"},{default:r(()=>[t(K,null,{default:r(()=>[t(S,{header:""},{default:r(()=>[b(" Â  ")]),_:1}),k(c.$slots,"menu")]),_:3})]),_:3},8,["modelValue"]),f("div",ne,[f("div",se,[k(c.$slots,"default")])])]),_:3})):(l(),m(g,{key:1},[t(O,{class:"bg-primary text-white"},{default:r(()=>[f("div",le,[t(P,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(z,null,{default:r(()=>[b(L(e.siteTitle),1)]),_:1}),k(c.$slots,"menu")])]),_:3}),f("div",ue,[f("div",ie,[f("div",ce,[k(c.$slots,"default")])])])],64))])}const pe=R(oe,[["render",de],["__file","MainLayoutHelper.vue"]]),_e={__name:"BreadcrumbsComp",setup(c,{expose:i}){i();const a=I(),e=x(),o=w();function p(d){return typeof d=="string"?d.replace(/^\//,""):""}const u=_(()=>a.$db().model("routeLineages").query().get()),s=d=>{o.push({name:d,params:e.params,query:e.query})},n=_(()=>o.resolve(e.path)),C=_(()=>{const d=n.value.matched[n.value.matched.length-1];p(d.path);const h=a.$db().model("routeLineages").query().where("name",d.name).first();return h?h.lineage.map(B=>a.$db().model("routeLineages").query().where("name",B).first()):[]}),E={store:a,route:e,router:o,standardizePath:p,lineages:u,goToRoute:s,routeMatch:n,breadcrumbs:C,getBreadcrumbLabel:d=>{if(d){const h=d.label.match(/:(\w+)/);if(h){const B=h[1];return e.params[B]||d.label}return d.label}return""},get useStore(){return I},computed:_,get useRoute(){return x},get useRouter(){return w}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function me(c,i,a,e,o,p){return l(),m("div",null,[t(Y,{class:"q-mt-md"},{default:r(()=>[t(D,{class:"text-subtitle2",label:"Home",to:{path:"/"}}),(l(!0),m(g,null,M(e.breadcrumbs,(u,s)=>(l(),y(D,{class:"text-subtitle2",key:s,label:e.getBreadcrumbLabel(u),onClick:n=>e.goToRoute(u.name)},null,8,["label","onClick"]))),128))]),_:1})])}const fe=R(_e,[["render",me],["__file","BreadcrumbsComp.vue"]]),ge=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(c,{expose:i}){i();const a=x(),e=v(a.path);F(a,n=>{e.value=n.path});const o=_(()=>q.get("VITE_AUTH")),p=_(()=>{const n=[{title:"Product Brands",route:"/lists/product-brands"},{title:"Product Categories",route:"/lists/product-categories"},{title:"Products",route:"/lists/products"}];if(o.value){const C=`/lists/users/${o.value.user.id}/${o.value.user.name}`;n.push({icon:"person",title:"My Account",route:C}),n.push({icon:"logout",title:"Logout",function:()=>{q.remove("VITE_AUTH"),window.location.href="/"}})}else n.push({icon:"person",title:"Login",route:"/login"}),n.push({icon:"edit",title:"Register",route:"/register"});return n.push({icon:"info",title:"About",route:"/about"}),n});function u(n){e.value=n}const s={route:a,activeRoute:e,session:o,linksList:p,updateActiveRoute:u,computed:_,ref:v,watch:F,get useRoute(){return x},EssentialLink:ae,MainLayoutHelper:pe,BreadcrumbsComp:fe,get VueCookies(){return q}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),ye={class:"q-mb-md"};function ve(c,i,a,e,o,p){const u=Z("router-view");return l(),y(e.MainLayoutHelper,null,{menu:r(()=>[(l(!0),m(g,null,M(e.linksList,s=>(l(),m(g,{key:s.title||s.groupTitle},[s.groupTitle?(l(),m(g,{key:0},[t(S,{header:""},{default:r(()=>[b(L(s.groupTitle),1)]),_:2},1024),(l(!0),m(g,null,M(s.links,n=>(l(),y(e.EssentialLink,j({key:n.title,ref_for:!0},n,{"active-route":e.activeRoute,indent:!0}),null,16,["active-route"]))),128))],64)):(l(),y(e.EssentialLink,j({key:1,ref_for:!0},s,{"active-route":e.activeRoute,indent:!1}),null,16,["active-route"]))],64))),128))]),default:r(()=>[t(ee,null,{default:r(()=>[f("div",ye,[t(e.BreadcrumbsComp)]),t(u,{onRouteChanged:e.updateActiveRoute})]),_:1})]),_:1})}const Se=R(ge,[["render",ve],["__file","MainLayout.vue"]]);export{Se as default};

import{_ as x,d as k,v as _,e as l,x as m,s as t,w as r,y as j,z as w,A as T,c as y,B as E,C as B,E as b,F as Q,G as N,H as U,I as g,J as h,o as A,K as V,L as W,N as O,O as P,R as z,S as G,T as J,U as K,V as L,W as f,q as X,u as $,X as S,Y as D,Z as H,$ as Y,a0 as F,r as Z,t as ee,a1 as I}from"./vendor.js";import q from"vue-cookies";import"moment";import"moment-timezone";const te=Object.assign({name:"EssentialLink"},{__name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},route:{type:String,default:null},function:{type:Function,default:()=>{}},external:{type:String,default:null},icon:{type:String,default:""},activeRoute:{type:String,required:!0},indent:{type:Boolean,default:!1}},setup(c,{expose:u}){u();const a=k(),e=c,o=_(()=>e.route&&e.route===e.activeRoute),s={router:a,props:e,isActive:o,click:()=>{e.route?a.push({path:e.route}):e.function()},computed:_,get useRouter(){return k}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function re(c,u,a,e,o,p){return l(),m(g,null,[t(U,{clickable:"",tag:e.props.external?"a":"router-link",href:e.props.external,onClick:e.click,target:"_blank","active-class":"q-item--highlighted",class:N({"q-pl-lg":e.props.indent}),style:T(e.isActive?"background-color: rgba(0, 31, 63, 0.1)":"")},{default:r(()=>[t(j,null,{default:r(()=>[t(w,{style:T(e.isActive?"font-weight: bold;":"")},{default:r(()=>[e.props.icon?(l(),y(E,{key:0,name:e.props.icon,size:"sm",style:{opacity:"50%"}},null,8,["name"])):B("",!0),b(" "+Q(e.props.title),1)]),_:1},8,["style"]),e.props.caption?(l(),y(w,{key:0,caption:""},{default:r(()=>[b(Q(e.props.caption),1)]),_:1})):B("",!0)]),_:1})]),_:1},8,["tag","href","class","style"]),B("",!0)],64)}const ae=x(te,[["render",re],["__file","EssentialLink.vue"]]),oe={__name:"MainLayoutHelper",setup(c,{expose:u}){u();const a=h(!1),e=()=>{a.value=window.innerWidth<=1151},o=h(!1);function p(){o.value=!o.value}A(()=>{e(),window.addEventListener("resize",e)}),V(()=>{window.removeEventListener("resize",e)});const s={isSmallScreen:a,checkScreenWidth:e,leftDrawerOpen:o,toggleLeftDrawer:p,ref:h,onMounted:A,onUnmounted:V};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},ne={class:"q-px-md"},se={class:"q-pb-md"},le={class:"container-md row no-wrap items-center bg-primary text-white"},ue={class:"container-md"},ie={class:"q-px-md"},ce={class:"q-pb-md"};function de(c,u,a,e,o,p){return l(),m("div",null,[e.isSmallScreen?(l(),y(X,{key:0,view:"lHh Lpr lFf",style:{"background-color":"#F8F8F8","padding-bottom":"50px"}},{default:r(()=>[t(W,{elevated:"",style:{},class:"bg-primary"},{default:r(()=>[t(O,null,{default:r(()=>[t(P,null,{default:r(()=>[t(E,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(z,null,{default:r(()=>[b("Home-Ed Community Hub")]),_:1}),t(G,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer})]),_:1})]),_:1}),t(J,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":u[0]||(u[0]=s=>e.leftDrawerOpen=s),"show-if-above":"",bordered:"",side:"right"},{default:r(()=>[t(K,null,{default:r(()=>[t(w,{header:""},{default:r(()=>[b(" Â  ")]),_:1}),L(c.$slots,"menu")]),_:3})]),_:3},8,["modelValue"]),f("div",ne,[f("div",se,[L(c.$slots,"default")])])]),_:3})):(l(),m(g,{key:1},[t(O,{class:"bg-primary text-white"},{default:r(()=>[f("div",le,[t(P,null,{default:r(()=>[t(E,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(z,null,{default:r(()=>[b("Home-Ed Community Hub")]),_:1}),L(c.$slots,"menu")])]),_:3}),f("div",ue,[f("div",ie,[f("div",ce,[L(c.$slots,"default")])])])],64))])}const pe=x(oe,[["render",de],["__file","MainLayoutHelper.vue"]]),_e={__name:"BreadcrumbsComp",setup(c,{expose:u}){u();const a=$(),e=S(),o=k();function p(d){return typeof d=="string"?d.replace(/^\//,""):""}const s=_(()=>a.$db().model("routeLineages").query().get()),i=d=>{o.push({name:d,params:e.params,query:e.query})},n=_(()=>o.resolve(e.path)),C=_(()=>{const d=n.value.matched[n.value.matched.length-1];p(d.path);const v=a.$db().model("routeLineages").query().where("name",d.name).first();return v?v.lineage.map(R=>a.$db().model("routeLineages").query().where("name",R).first()):[]}),M={store:a,route:e,router:o,standardizePath:p,lineages:s,goToRoute:i,routeMatch:n,breadcrumbs:C,getBreadcrumbLabel:d=>{if(d){const v=d.label.match(/:(\w+)/);if(v){const R=v[1];return e.params[R]||d.label}return d.label}return""},get useStore(){return $},computed:_,get useRoute(){return S},get useRouter(){return k}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}};function me(c,u,a,e,o,p){return l(),m("div",null,[t(Y,{class:"q-mt-md"},{default:r(()=>[t(D,{class:"text-subtitle2",label:"Home",to:{path:"/"}}),(l(!0),m(g,null,H(e.breadcrumbs,(s,i)=>(l(),y(D,{class:"text-subtitle2",key:i,label:e.getBreadcrumbLabel(s),onClick:n=>e.goToRoute(s.name)},null,8,["label","onClick"]))),128))]),_:1})])}const fe=x(_e,[["render",me],["__file","BreadcrumbsComp.vue"]]),ge=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(c,{expose:u}){u();const a=S(),e=h(a.path);F(a,n=>{e.value=n.path});const o=_(()=>q.get("VITE_AUTH")),p=_(()=>{const n=[{title:"Product Brands",route:"/lists/product-brands"},{title:"Product Categories",route:"/lists/product-categories"},{title:"Products",route:"/lists/products"}];if(o.value){const C=`/lists/users/${o.value.user.id}/${o.value.user.name}`;n.push({icon:"person",title:"My Account",route:C}),n.push({icon:"logout",title:"Logout",function:()=>{q.remove("VITE_AUTH"),window.location.href="/"}})}else n.push({icon:"person",title:"Login",route:"/login"}),n.push({icon:"edit",title:"Register",route:"/register"});return n.push({icon:"info",title:"About",route:"/about"}),n});function s(n){e.value=n}const i={route:a,activeRoute:e,session:o,linksList:p,updateActiveRoute:s,computed:_,ref:h,watch:F,get useRoute(){return S},EssentialLink:ae,MainLayoutHelper:pe,BreadcrumbsComp:fe,get VueCookies(){return q}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),ye={class:"q-mb-md"};function be(c,u,a,e,o,p){const s=Z("router-view");return l(),y(e.MainLayoutHelper,null,{menu:r(()=>[(l(!0),m(g,null,H(e.linksList,i=>(l(),m(g,{key:i.title||i.groupTitle},[i.groupTitle?(l(),m(g,{key:0},[t(w,{header:""},{default:r(()=>[b(Q(i.groupTitle),1)]),_:2},1024),(l(!0),m(g,null,H(i.links,n=>(l(),y(e.EssentialLink,I({key:n.title,ref_for:!0},n,{"active-route":e.activeRoute,indent:!0}),null,16,["active-route"]))),128))],64)):(l(),y(e.EssentialLink,I({key:1,ref_for:!0},i,{"active-route":e.activeRoute,indent:!1}),null,16,["active-route"]))],64))),128))]),default:r(()=>[t(ee,null,{default:r(()=>[f("div",ye,[t(e.BreadcrumbsComp)]),t(s,{onRouteChanged:e.updateActiveRoute})]),_:1})]),_:1})}const Se=x(ge,[["render",be],["__file","MainLayout.vue"]]);export{Se as default};

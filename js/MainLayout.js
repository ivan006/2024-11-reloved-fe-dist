import{d as w,D as _,e as l,E as m,z as t,x as r,F as $,G as S,I as V,c as y,J as Q,K as B,L as v,O as L,T as N,W as U,X as g,Y as b,o as A,Z as O,$ as W,a0 as P,a1 as z,a2 as H,a3 as G,a4 as J,a5 as K,a6 as k,a7 as f,y as X,u as D,a8 as x,a9 as I,aa as M,ab as Y,ac as F,V as q,r as Z,C as ee,ad as j}from"./vendor.js";import{_ as C}from"./index.js";const te=Object.assign({name:"EssentialLink"},{__name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},route:{type:String,default:null},function:{type:Function,default:()=>{}},external:{type:String,default:null},icon:{type:String,default:""},activeRoute:{type:String,required:!0},indent:{type:Boolean,default:!1}},setup(c,{expose:i}){i();const a=w(),e=c,o=_(()=>e.route&&e.route===e.activeRoute),u={router:a,props:e,isActive:o,click:()=>{e.route?a.push({path:e.route}):e.function()},computed:_,get useRouter(){return w}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function re(c,i,a,e,o,p){return l(),m(g,null,[t(U,{clickable:"",tag:e.props.external?"a":"router-link",href:e.props.external,onClick:e.click,target:"_blank","active-class":"q-item--highlighted",class:N({"q-pl-lg":e.props.indent}),style:V(e.isActive?"background-color: rgba(0, 31, 63, 0.1)":"")},{default:r(()=>[t($,null,{default:r(()=>[t(S,{style:V(e.isActive?"font-weight: bold;":"")},{default:r(()=>[e.props.icon?(l(),y(Q,{key:0,name:e.props.icon,size:"sm",style:{opacity:"50%"}},null,8,["name"])):B("",!0),v(" "+L(e.props.title),1)]),_:1},8,["style"]),e.props.caption?(l(),y(S,{key:0,caption:""},{default:r(()=>[v(L(e.props.caption),1)]),_:1})):B("",!0)]),_:1})]),_:1},8,["tag","href","class","style"]),B("",!0)],64)}const ae=C(te,[["render",re],["__file","EssentialLink.vue"]]),oe={__name:"MainLayoutHelper",setup(c,{expose:i}){i();const a=b(!1),e=()=>{a.value=window.innerWidth<=1151},o=b(!1),p=b("Lorum Ipsum");function u(){o.value=!o.value}A(()=>{e(),window.addEventListener("resize",e)}),O(()=>{window.removeEventListener("resize",e)});const s={isSmallScreen:a,checkScreenWidth:e,leftDrawerOpen:o,siteTitle:p,toggleLeftDrawer:u,ref:b,onMounted:A,onUnmounted:O};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},ne={class:"q-px-md"},se={class:"q-pb-md"},le={class:"container-md row no-wrap items-center bg-primary text-white"},ue={class:"container-md"},ie={class:"q-px-md"},ce={class:"q-pb-md"};function de(c,i,a,e,o,p){return l(),m("div",null,[e.isSmallScreen?(l(),y(X,{key:0,view:"lHh Lpr lFf",style:{"background-color":"#F8F8F8","padding-bottom":"50px"}},{default:r(()=>[t(W,{elevated:"",style:{},class:"bg-primary"},{default:r(()=>[t(P,null,{default:r(()=>[t(z,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(H,null,{default:r(()=>[v(L(e.siteTitle),1)]),_:1}),t(G,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer})]),_:1})]),_:1}),t(J,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":i[0]||(i[0]=u=>e.leftDrawerOpen=u),"show-if-above":"",bordered:"",side:"right"},{default:r(()=>[t(K,null,{default:r(()=>[t(S,{header:""},{default:r(()=>[v(" Â  ")]),_:1}),k(c.$slots,"menu")]),_:3})]),_:3},8,["modelValue"]),f("div",ne,[f("div",se,[k(c.$slots,"default")])])]),_:3})):(l(),m(g,{key:1},[t(P,{class:"bg-primary text-white"},{default:r(()=>[f("div",le,[t(z,null,{default:r(()=>[t(Q,{name:"school",size:"lg",style:{opacity:"50%"}})]),_:1}),t(H,null,{default:r(()=>[v(L(e.siteTitle),1)]),_:1}),k(c.$slots,"menu")])]),_:3}),f("div",ue,[f("div",ie,[f("div",ce,[k(c.$slots,"default")])])])],64))])}const pe=C(oe,[["render",de],["__file","MainLayoutHelper.vue"]]),_e={__name:"BreadcrumbsComp",setup(c,{expose:i}){i();const a=D(),e=x(),o=w();function p(d){return typeof d=="string"?d.replace(/^\//,""):""}const u=_(()=>a.$db().model("routeLineages").query().get()),s=d=>{o.push({name:d,params:e.params,query:e.query})},n=_(()=>o.resolve(e.path)),R=_(()=>{const d=n.value.matched[n.value.matched.length-1];p(d.path);const h=a.$db().model("routeLineages").query().where("name",d.name).first();return h?h.lineage.map(T=>a.$db().model("routeLineages").query().where("name",T).first()):[]}),E={store:a,route:e,router:o,standardizePath:p,lineages:u,goToRoute:s,routeMatch:n,breadcrumbs:R,getBreadcrumbLabel:d=>{if(d){const h=d.label.match(/:(\w+)/);if(h){const T=h[1];return e.params[T]||d.label}return d.label}return""},get useStore(){return D},computed:_,get useRoute(){return x},get useRouter(){return w}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}};function me(c,i,a,e,o,p){return l(),m("div",null,[t(Y,{class:"q-mt-md"},{default:r(()=>[t(I,{class:"text-subtitle2",label:"Home",to:{path:"/"}}),(l(!0),m(g,null,M(e.breadcrumbs,(u,s)=>(l(),y(I,{class:"text-subtitle2",key:s,label:e.getBreadcrumbLabel(u),onClick:n=>e.goToRoute(u.name)},null,8,["label","onClick"]))),128))]),_:1})])}const fe=C(_e,[["render",me],["__file","BreadcrumbsComp.vue"]]),ge=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(c,{expose:i}){i();const a=x(),e=b(a.path);F(a,n=>{e.value=n.path});const o=_(()=>q.get("VITE_AUTH")),p=_(()=>{const n=[{title:"Product Brands",route:"/lists/product-brands"},{title:"Product Categories",route:"/lists/product-categories"},{title:"Products",route:"/lists/products"}];if(o.value){const R=`/lists/users/${o.value.user.id}/${o.value.user.name}`;n.push({icon:"person",title:"My Account",route:R}),n.push({icon:"logout",title:"Logout",function:()=>{q.remove("VITE_AUTH"),window.location.href="/"}})}else n.push({icon:"person",title:"Login",route:"/login"}),n.push({icon:"edit",title:"Register",route:"/register"});return n.push({icon:"info",title:"About",route:"/about"}),n});function u(n){e.value=n}const s={route:a,activeRoute:e,session:o,linksList:p,updateActiveRoute:u,computed:_,ref:b,watch:F,get useRoute(){return x},EssentialLink:ae,MainLayoutHelper:pe,BreadcrumbsComp:fe,get VueCookies(){return q}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),ye={class:"q-mb-md"};function be(c,i,a,e,o,p){const u=Z("router-view");return l(),y(e.MainLayoutHelper,null,{menu:r(()=>[(l(!0),m(g,null,M(e.linksList,s=>(l(),m(g,{key:s.title||s.groupTitle},[s.groupTitle?(l(),m(g,{key:0},[t(S,{header:""},{default:r(()=>[v(L(s.groupTitle),1)]),_:2},1024),(l(!0),m(g,null,M(s.links,n=>(l(),y(e.EssentialLink,j({key:n.title,ref_for:!0},n,{"active-route":e.activeRoute,indent:!0}),null,16,["active-route"]))),128))],64)):(l(),y(e.EssentialLink,j({key:1,ref_for:!0},s,{"active-route":e.activeRoute,indent:!1}),null,16,["active-route"]))],64))),128))]),default:r(()=>[t(ee,null,{default:r(()=>[f("div",ye,[t(e.BreadcrumbsComp)]),t(u,{onRouteChanged:e.updateActiveRoute})]),_:1})]),_:1})}const ke=C(ge,[["render",be],["__file","MainLayout.vue"]]);export{ke as default};
